<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<!-- import CSS -->
		<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
		<link rel="stylesheet" href="./css/index.css">
		<link rel="stylesheet" href="./css/result.css">
		<!-- import Vue before Element -->
		<script src="https://unpkg.com/vue/dist/vue.js"></script>
		<!-- import         JavaScript -->
		<script src="https://unpkg.com/element-ui/lib/index.js"></script>
		<!-- import JQuery -->
		<script src="https://cdn.staticfile.org/jquery/3.1.1/jquery.min.js"></script>
		<script type="text/javascript">
			window.onload
		</script>
		<style type="text/css">
			
		</style>
	</head>
	<body>
		
 		<el-container>
 			<el-header style="top: 2px;">

				
				<div class="header_searchbar" id="searchbar">
					
	 					<el-form :inline="true" label-width="10%" :model="info" style="margin-top: 1%;width: 90%">
	 						<el-image onclick="window.location.href = 'index.html'" id="logo" style="" src="./pics/logo.png"></el-image>
	 						<el-form-item >
								<!-- <el-input class="header_search"  placeholder="" v-model="info.studentNumber" :disabled="false" style="width: 400px;"> -->
								<el-autocomplete style="width: 400px;" class="inline-input header_search" v-model="state2" :fetch-suggestions="querySearch" placeholder="" :trigger-on-focus="false" @select="handleSelect">	
								</el-autocomplete>
								
								<i slot="prefix" class="el-input__icon el-icon-search"></i>
							</el-form-item>
	 						<el-form-item >
									<el-button class="header_search" type="primary" @click="search">Search</el-button>
									<el-button type="primary" @click="search">Advanced</el-button>
							</el-form-item>


						</el-form>
 					
 				</div>
 				
 			</el-header>
 			<el-main>

 				<div style="height: 60px;">
 					
 				</div>
				<div class="result_body" id="result">
					<div v-for="(result, n) in results">
						<div class="result_card">
							<h2 class="result_title">{{result.title}}</h2>
							<div class="result_snippet">{{result.abstract}}</div>
						</div>
					</div>
					<el-pagination background layout="prev, pager, next" :total="1000">
					</el-pagination>
				</div>
				
 			</el-main>
 			<el-footer>
 				<div style="text-align: center;">
 				presented by cltzz
 				</div>
 			</el-footer>
 		</el-container>
		
	</body>
	<script type="text/javascript">
		new Vue({
			el: '#result',
			data: {
				results:[]
			},
			mounted() {
    		if (localStorage.getItem('results')) {
	      		try {
	        		this.results = JSON.parse(localStorage.getItem('results'));
	      		} catch(e) {
	        		localStorage.removeItem('results');
	      		}
      		}
      	}
		});
	</script>
	<script>
		new Vue({
			el: '#searchbar',
			data: function() {
				return {
					info: {
						query: '',
					},
					role:'user',
					restaurants: [{ "value": "三全鲜食（北新泾店）", "address": "长宁区新渔路144号" },
          { "value": "Hot honey 首尔炸鸡（仙霞路）", "address": "上海市长宁区淞虹路661号" },
          { "value": "新旺角茶餐厅", "address": "上海市普陀区真北路988号创邑金沙谷6号楼113" },
          { "value": "泷千家(天山西路店)", "address": "天山西路438号" },
          { "value": "胖仙女纸杯蛋糕（上海凌空店）", "address": "上海市长宁区金钟路968号1幢18号楼一层商铺18-101" },
          { "value": "贡茶", "address": "上海市长宁区金钟路633号" },
          { "value": "豪大大香鸡排超级奶爸", "address": "上海市嘉定区曹安公路曹安路1685号" },
          { "value": "茶芝兰（奶茶，手抓饼）", "address": "上海市普陀区同普路1435号" },
          { "value": "十二泷町", "address": "上海市北翟路1444弄81号B幢-107" },
          { "value": "星移浓缩咖啡", "address": "上海市嘉定区新郁路817号" },
          { "value": "阿姨奶茶/豪大大", "address": "嘉定区曹安路1611号" },
          { "value": "新麦甜四季甜品炸鸡", "address": "嘉定区曹安公路2383弄55号" },
          { "value": "Monica摩托主题咖啡店", "address": "嘉定区江桥镇曹安公路2409号1F，2383弄62号1F" },
          { "value": "浮生若茶（凌空soho店）", "address": "上海长宁区金钟路968号9号楼地下一层" },
          { "value": "NONO JUICE  鲜榨果汁", "address": "上海市长宁区天山西路119号" },
          { "value": "CoCo都可(北新泾店）", "address": "上海市长宁区仙霞西路" },
          { "value": "快乐柠檬（神州智慧店）", "address": "上海市长宁区天山西路567号1层R117号店铺" }],
					state1: '',
        			state2: ''
				}
			},
			methods: {
				currRole(selVal){
					this.role = selVal;
					sessionStorage.setItem('role', this.role);
				},
				search(){
					var _self = this;
					window.location.href = 'result.html';
					
				},querySearch(queryString, cb) {
        			var restaurants = this.restaurants;
        			var results = queryString ? restaurants.filter(this.createFilter(queryString)) : restaurants;
        			// 调用 callback 返回建议列表的数据
        			cb(results);
      			},
      			createFilter(queryString) {
        			return (restaurant) => {
          				return (restaurant.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);
        			};
      			},
      			loadAll() {
				    return [];
				},
		      	handleSelect(item) {
			        console.log(item);
			      }
				
			}
		});
	</script>
</html>